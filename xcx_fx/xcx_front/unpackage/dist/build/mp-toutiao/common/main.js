(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["common/main"],{"0641":function(e,a,t){"use strict";t.r(a);var n=t("b2bd");for(var o in n)"default"!==o&&function(e){t.d(a,e,(function(){return n[e]}))}(o);t("c9c8");var r,u,c,l,d=t("f0c5"),i=Object(d["a"])(n["default"],r,u,!1,null,null,null,!1,c,l);a["default"]=i.exports},"0c67":function(e,a,t){},b2bd:function(e,a,t){"use strict";t.r(a);var n=t("e43c"),o=t.n(n);for(var r in n)"default"!==r&&function(e){t.d(a,e,(function(){return n[e]}))}(r);a["default"]=o.a},c9c8:function(e,a,t){"use strict";var n=t("0c67"),o=t.n(n);o.a},e43c:function(e,a,t){"use strict";(function(e){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=u(t("a34a")),o=u(t("1f5d")),r=u(t("253c"));function u(e){return e&&e.__esModule?e:{default:e}}function c(e,a,t,n,o,r,u){try{var c=e[r](u),l=c.value}catch(d){return void t(d)}c.done?a(l):Promise.resolve(l).then(n,o)}function l(e){return function(){var a=this,t=arguments;return new Promise((function(n,o){var r=e.apply(a,t);function u(e){c(r,n,o,u,l,"next",e)}function l(e){c(r,n,o,u,l,"throw",e)}u(void 0)}))}}var d={onLaunch:function(){var a=this,t=this;e.getStorage({key:"userLogin",success:function(e){t.globalData.hasLogin=!0}}),this.getAdInfo(),this.getShareId(),this.checkSession((function(e){a.globalData.openid=e,a.getAdLogInfo(),a.saveAnalysisInfo(1)}),this.globalData.projectId)},onShow:function(){},onHide:function(){},methods:{getShareId:function(){var e=this;return l(n.default.mark((function a(){var t,u;return n.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t=e,a.next=3,(0,r.default)({url:"".concat(o.default.API,"api/w/getShareInfo"),method:"POST"});case 3:u=a.sent,0===u.error_code&&(t.globalData.shareInfo=u.data);case 5:case"end":return a.stop()}}),a)})))()},checkSession:function(a,t){var n=this;e.checkSession({success:function(o){e.getStorage({key:"openid",success:function(e){e.data?a&&a(e.data):n.loginAction(a,t)},fail:function(e){n.loginAction(a,t)}})},fail:function(e){n.loginAction(a,t)}})},loginAction:function(a,t){e.login({success:function(r){return l(n.default.mark((function u(){return n.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.request({url:"".concat(o.default.API,"api/user/openid/bind"),data:{code:r.code,projectId:t},success:function(t){0===t.data.error_code?(e.setStorage({key:"openid",data:t.data.data.openid}),a&&a(t.data.data.openid)):e.showToast({title:"获取openid失败",icon:"none"})},fail:function(e){console.log(e)}});case 1:case"end":return n.stop()}}),u)})))()}})},saveUserInfo:function(e,a){var t=this;return l(n.default.mark((function u(){var c;return n.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,(0,r.default)({url:"".concat(o.default.API,"api/user/saveInfo"),method:"POST",data:{openid:t.globalData.openid,avatarUrl:e,nickName:a,platform:t.globalData.projectId}});case 2:c=n.sent,console.log(c);case 4:case"end":return n.stop()}}),u)})))()},getAdInfo:function(){var a=this;e.request({url:"".concat(o.default.API,"api/w/getAdInfo"),data:{projectId:this.globalData.projectId},method:"POST",success:function(e){a.globalData.adInfo=e.data.data,a.globalData.canShowAd=1==e.data.data.open_ad,console.log(a.globalData.adInfo)}})},getAdLogInfo:function(){var e=this;return l(n.default.mark((function a(){var t,u;return n.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t=e,a.next=3,(0,r.default)({url:"".concat(o.default.API,"api/ad/logSearch"),method:"POST",data:{openid:e.globalData.openid,platform:e.globalData.projectId}});case 3:u=a.sent,t.globalData.ad_number=u.data.ad_number,t.globalData.illegal_ad_number=u.data.illegal_ad_number,t.globalData.free_ad_num=u.data.free_ad_num,t.globalData.illfree_ad_num=u.data.illfree_ad_num,t.globalData.de_ad_number=u.data.de_ad_number,t.globalData.adRequestRes=!0;case 10:case"end":return a.stop()}}),a)})))()},addAdLog:function(){var e=this;return l(n.default.mark((function a(){var t;return n.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t=e,a.next=3,(0,r.default)({url:"".concat(o.default.API,"api/ad/logAdd"),method:"POST",data:{openid:e.globalData.openid,platform:e.globalData.projectId}});case 3:a.sent,t.globalData.illegal_ad_number++;case 5:case"end":return a.stop()}}),a)})))()},addFreeAdLog:function(){var e=this;return l(n.default.mark((function a(){var t;return n.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t=e,a.next=3,(0,r.default)({url:"".concat(o.default.API,"api/ad/logAdd"),method:"POST",data:{openid:e.globalData.openid,platform:e.globalData.projectId,type:2}});case 3:a.sent,t.globalData.illfree_ad_num++;case 5:case"end":return a.stop()}}),a)})))()},saveAnalysisInfo:function(e){var a=arguments,t=this;return l(n.default.mark((function u(){var c,l;return n.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return c=a.length>1&&void 0!==a[1]?a[1]:0,n.next=3,(0,r.default)({url:"".concat(o.default.API,"api/w/data/analysis/save"),method:"POST",data:{openid:t.globalData.openid,platform:t.globalData.projectId,type:e,wallpaper_id:c}});case 3:l=n.sent,console.log(l);case 5:case"end":return n.stop()}}),u)})))()},dealPp:function(e,a,t){var u=this;return l(n.default.mark((function c(){return n.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,(0,r.default)({url:"".concat(o.default.API,"api/w/dealPp"),method:"POST",data:{id:e,platform:u.globalData.projectId,openid:u.globalData.openid,nickname:a,avatar_url:t}});case 2:n.sent;case 3:case"end":return n.stop()}}),c)})))()}},globalData:{projectId:"dy",canShowAd:!1,shareInfo:null,adInfo:null,openid:"",hasLogin:!1,ad_number:0,illegal_ad_number:0,free_ad_num:0,illfree_ad_num:0,de_ad_number:0,adRequestRes:!1}};a.default=d}).call(this,t("f266")["default"])},f9f5:function(e,a,t){"use strict";(function(e,a){t("5d6c");var n=r(t("0641")),o=r(t("66fd"));function r(e){return e&&e.__esModule?e:{default:e}}function u(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function c(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?u(Object(t),!0).forEach((function(a){l(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):u(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function l(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}e.__webpack_require_UNI_MP_PLUGIN__=t,o.default.config.productionTip=!1,n.default.mpType="app";var d=new o.default(c({},n.default));a(d).$mount()}).call(this,t("f266")["default"],t("f266")["createApp"])}},[["f9f5","common/runtime","common/vendor"]]]);