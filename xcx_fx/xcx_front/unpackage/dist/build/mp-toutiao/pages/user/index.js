(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/index"],{1245:function(n,t,e){"use strict";e.r(t);var o=e("2505"),a=e.n(o);for(var r in o)"default"!==r&&function(n){e.d(t,n,(function(){return o[n]}))}(r);t["default"]=a.a},2505:function(n,t,e){"use strict";(function(n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=u(e("a34a")),a=u(e("1f5d")),r=u(e("253c"));function u(n){return n&&n.__esModule?n:{default:n}}function i(n,t,e,o,a,r,u){try{var i=n[r](u),s=i.value}catch(c){return void e(c)}i.done?t(s):Promise.resolve(s).then(o,a)}function s(n){return function(){var t=this,e=arguments;return new Promise((function(o,a){var r=n.apply(t,e);function u(n){i(r,o,a,u,s,"next",n)}function s(n){i(r,o,a,u,s,"throw",n)}u(void 0)}))}}var c=getApp(),f={data:function(){return{bodyShow:!0,userInfo:null,hasUserInfo:!1}},onLoad:function(n){this.getUserSystemInfo()},onShow:function(){console.log(124),console.log(c.globalData.hasLogin),c.globalData.hasLogin||(this.userInfo=null)},methods:{settingRedirect:function(){n.navigateTo({url:"/pages/user/setting"})},normalQuestion:function(){n.navigateTo({url:"/pages/user/richtext?id=1"})},creator:function(){n.navigateTo({url:"/pages/index/webview?url=https://rtj.darexian.com"})},redirectKefu:function(){tt.openAwemeUserProfile({success:function(n){console.log(n)}})},getUserSystemInfo:function(){var n=this;return s(o.default.mark((function t(){var e,u;return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=n,t.next=3,(0,r.default)({url:"".concat(a.default.API,"api/user/getInfo"),method:"post",data:{openid:c.globalData.openid,platform:c.globalData.projectId}});case 3:u=t.sent,0===u.error_code&&c.globalData.hasLogin&&(e.hasUserInfo=!0,e.userInfo=u.data);case 5:case"end":return t.stop()}}),t)})))()},getUserProfile:function(t){var e=this;n.getUserProfile({desc:"用于完善会员资料",success:function(n){e.dealLoginCallback(n.userInfo)},fail:function(){return n.showToast({title:"请允许授权",icon:"none"})}})},getTtUserInfo:function(){var t=this;tt.authorize({scope:"scope.userInfo",success:function(e){console.log(e),tt.getUserInfo({success:function(n){t.dealLoginCallback(n.userInfo)},fail:function(t){return n.showToast({title:"请允许授权",icon:"none"})}})},fail:function(t){return"authorize:fail auth deny"==t.errMsg?n.showToast({title:"请在设置里打开用户信息",icon:"none"}):n.showToast({title:"请允许授权",icon:"none"})}})},dealLoginCallback:function(t){this.userInfo=t,this.hasUserInfo=!0,n.setStorage({key:"userLogin",data:1}),c.globalData.hasLogin=!0,c.saveUserInfo(t.avatarUrl,t.nickName)}}};t.default=f}).call(this,e("f266")["default"])},"27f5":function(n,t,e){},"392b":function(n,t,e){"use strict";var o;e.d(t,"b",(function(){return a})),e.d(t,"c",(function(){return r})),e.d(t,"a",(function(){return o}));var a=function(){var n=this,t=n.$createElement;n._self._c},r=[]},"4c4b":function(n,t,e){"use strict";(function(n,t){e("5d6c");a(e("66fd"));var o=a(e("f841"));function a(n){return n&&n.__esModule?n:{default:n}}n.__webpack_require_UNI_MP_PLUGIN__=e,t(o.default)}).call(this,e("f266")["default"],e("f266")["createPage"])},5944:function(n,t,e){},"8fff":function(n,t,e){"use strict";var o=e("5944"),a=e.n(o);a.a},a426:function(n,t,e){"use strict";var o=e("27f5"),a=e.n(o);a.a},f841:function(n,t,e){"use strict";e.r(t);var o=e("392b"),a=e("1245");for(var r in a)"default"!==r&&function(n){e.d(t,n,(function(){return a[n]}))}(r);e("a426"),e("8fff");var u,i=e("f0c5"),s=Object(i["a"])(a["default"],o["b"],o["c"],!1,null,"0220e9f0",null,!1,o["a"],u);t["default"]=s.exports}},[["4c4b","common/runtime","common/vendor"]]]);